<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Showcase - ParticleBox</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/showcase.css">
    <link rel="icon" type="image/png" href="icon.png">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="https://kit.fontawesome.com/ca7f2ffa51.js" crossorigin="anonymous"></script>
</head>

<body>
    <div class="navbar">
        <div class="logo">
            <a href="index.html" class="icon">
                <img src="icon.png" height="27px" width="27px" alt="Logo">
            </a>
        </div>
        <a href="index.html" class="nav-text">Home</a>
        <a href="#overview" class="nav-text">Overview</a>
        <a href="#gallery" class="nav-text">Gallery</a>
        <a href="#background" class="nav-text">Background</a>
        <a href="#implementation" class="nav-text">Implementation</a>
        <a href="#performance" class="nav-text">Performance</a>
        <a href="#tech-stack" class="nav-text">Tech Stack</a>
    </div>
    <div class="showcase__hero">
        <div class="showcase__wrapper">
            <div class="project-card">
                <div class="project-card__header">
                    <div class="project-card__header-left">
                        <h1 class="project-title">ParticleBox</h1>
                        <div class="project-meta">
                            <span class="project-language">C++17 | SDL2 | OpenMP | Apple SIMD</span>
                            <span class="project-license">MIT License</span>
                        </div>
                    </div>
                    <div class="project-card__header-right">
                        <div class="project-stats">
                            <div class="stat-item">
                                <i class="fas fa-star"></i>
                                <span class="stat-count stars-count">128</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-code-branch"></i>
                                <span class="stat-count forks-count">24</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-eye"></i>
                                <span class="stat-count watchers-count">76</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="project-card__body">
                    <p class="project-description">A high-performance C++ particle simulator leveraging multithreading
                        (OpenMP & GCD), spatial partitioning (grid), SIMD (Apple Accelerate & auto-vectorization), and
                        optimized memory patterns for real-time physics simulation.</p>
                </div>
                <div class="project-updated">
                    <span>Updated <span class="updated-date">March 2025</span></span>
                </div>
            </div>
        </div>
    </div>

    <div style="text-align: center; font-size: 2rem; margin: 20px 0;">
        <span>•</span>
        <span>•</span>
        <span>•</span>
    </div>

    <div class="showcase__content">
        <section id="overview" class="showcase__section">
            <h2>Overview</h2>
            <p>
                ParticleBox is a high-performance C++ physics simulator capable of rendering thousands of interacting
                particles in real-time. It leverages modern C++17 features, SIMD acceleration (Apple Accelerate), and
                multithreading (OpenMP/GCD) to maximize throughput on multi-core systems.
            </p>

            <h3>Key Optimization Techniques</h3>
            <ul>
                <li><strong>Spatial Partitioning:</strong> Grid-based subdivision reduces collision complexity from
                    \(O(n^2)\) to near \(O(n)\) using efficient bitwise indexing.</li>
                <li><strong>Parallel Processing:</strong> Dynamic workload distribution via OpenMP and Grand Central
                    Dispatch (GCD) ensures optimal core utilization.</li>
                <li><strong>SIMD Acceleration:</strong> Vectorized math operations using Apple's Accelerate framework
                    and compiler auto-vectorization for massive throughput.</li>
                <li><strong>Memory Optimization:</strong> Contiguous memory layouts and pre-allocation strategies
                    minimize cache misses and runtime overhead.</li>
            </ul>
        </section>

        <section id="gallery" class="showcase__section">
            <h2>Gallery</h2>
            <div class="image-gallery">
                <img src="images/p2.png" alt="Particle simulation screenshot - Example 1">
                <img src="images/p1.gif" alt="Animated particle simulation - Example 2">
            </div>
        </section>

        <section id="background" class="showcase__section">
            <h2>Background & Physics</h2>

            <h3>Collision Detection</h3>
            <p>
                To maintain performance, we calculate squared distances to avoid expensive square root operations in the
                inner loop:
            </p>
            <p>
                \[
                d^2 = (p2.x - p1.x)^2 + (p2.y - p1.y)^2
                \]
            </p>
            <p>
                A collision occurs when \(d^2 < (r1 + r2)^2\). For force calculations requiring normalized vectors, we
                    employ the Fast Inverse Square Root algorithm. </p>

                    <h3>Force Calculation</h3>
                    <p>
                        Repulsion forces are applied proportional to the overlap depth \(\delta\):
                    </p>
                    <p>
                        \[
                        \mathbf{F}_r = -\hat{\mathbf{n}} \cdot \text{repulsionStrength} \cdot \delta
                        \]
                    </p>

                    <h3>Integration</h3>
                    <p>
                        State updates are handled via Semi-Implicit Euler integration for stability and speed:
                    </p>
                    <p>
                        \[
                        \mathbf{v}_{t+\Delta t} = \mathbf{v}_t + (\mathbf{F}_t / m) \cdot \Delta t
                        \]
                        \[
                        \mathbf{p}_{t+\Delta t} = \mathbf{p}_t + \mathbf{v}_{t+\Delta t} \cdot \Delta t
                        \]
                    </p>
        </section>

        <section id="implementation" class="showcase__section">
            <h2>Implementation Details</h2>

            <h3>System Architecture</h3>
            <p>
                The codebase is structured for modularity and performance:
            </p>
            <ul>
                <li><strong>Simulation Core:</strong> Manages particle lifecycle, state, and the main update loop.</li>
                <li><strong>Physics Engine:</strong> Handles force accumulation, collision resolution, and boundary
                    constraints.</li>
                <li><strong>Rendering:</strong> Decoupled rendering pipeline using SDL2 for efficient visualization.
                </li>
            </ul>

            <h3>Spatial Partitioning</h3>
            <p>
                The grid system uses a flat-array structure to optimize neighbor lookups. Particles are mapped to cells
                using bitwise spatial hashing, allowing for constant-time access to potential collision candidates.
            </p>

            <h3>Multithreading Strategy</h3>
            <p>
                The engine implements a platform-agnostic threading model:
            </p>
            <ul>
                <li><strong>Apple Silicon:</strong> Native GCD implementation for low-overhead task scheduling.</li>
                <li><strong>Cross-Platform:</strong> OpenMP and <code>std::async</code> fallbacks for Windows/Linux
                    environments.</li>
            </ul>

            <h3>SIMD & Memory</h3>
            <p>
                Vector operations are accelerated using <code>simd_float2</code> on macOS, while
                <code>std::vector</code> pre-allocation prevents runtime resizing. Data is stored in an Array of Structs
                (AoS) pattern, optimized for the specific access patterns of the simulation loop.
            </p>
        </section>

        <section id="performance" class="showcase__section">
            <h2>Performance Analysis</h2>
            <p>
                Profiling with Instruments and VTune guided the optimization process, resulting in:
            </p>
            <ul>
                <li><strong>Algorithmic Efficiency:</strong> Spatial partitioning eliminated the primary \(O(n^2)\)
                    bottleneck.</li>
                <li><strong>Compute Density:</strong> SIMD vectorization significantly increased floating-point
                    throughput.</li>
                <li><strong>Scalability:</strong> The multithreaded architecture scales linearly with available cores,
                    maintaining high frame rates even under heavy load.</li>
            </ul>
        </section>

        <section id="tech-stack" class="showcase__section">
            <h2>Technology Stack</h2>
            <div class="tech-icons">
                <img src="https://upload.wikimedia.org/wikipedia/commons/1/18/ISO_C%2B%2B_Logo.svg" alt="C++ Logo"
                    title="C++" class="icon">
            </div>
            <ul>
                <li><strong>Core Language:</strong> C++17</li>
                <li><strong>Graphics/Windowing API:</strong> SDL2, SDL2_ttf</li>
                <li><strong>Build System:</strong> Make (Makefile) with platform detection and optimization flags
                    (<code>-O3</code>, <code>-march=native</code>, <code>-mcpu=apple-m1</code>,
                    <code>-ftree-vectorize</code>, <code>-fopenmp</code>).
                </li>
                <li><strong>Parallelism:</strong> OpenMP, C++11 Threads (<code>std::async</code>,
                    <code>std::future</code>), Apple Grand Central Dispatch (GCD)
                </li>
                <li><strong>SIMD:</strong> Apple Accelerate Framework (<code>simd/simd.h</code>), Compiler
                    Auto-Vectorization (via flags)</li>
                <li><strong>Key Optimization Techniques:</strong> Spatial Partitioning (Grid), Multithreading, SIMD,
                    Memory Pre-allocation, Fast Math Algorithms, Texture Caching.</li>
                <li><strong>Profiling Tools:</strong> Valgrind, Intel VTune, Apple Instruments</li>
                <li><strong>Development Environment:</strong> Visual Studio Code, CLion (User specified)</li>
                <li><strong>Platform Support:</strong> Windows, macOS (with Apple Silicon optimizations), Linux.</li>
            </ul>
        </section>
    </div>
    <div class="fullscreen-viewer">
        <img src="" alt="Fullscreen image" class="fullscreen-image">
        <div class="fullscreen-nav">
            <button class="fullscreen-prev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="fullscreen-next">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <button class="fullscreen-close">×</button>
    </div>

    <script src="js/photo.js"></script>
    <script src="js/showcase.js"></script>
    <script src="js/github.js"></script>
    <script src="js/track.js"></script>
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
        if (!document.querySelector('.stars-count').textContent.includes('Loading')) {
        }
    </script>
</body>

</html>